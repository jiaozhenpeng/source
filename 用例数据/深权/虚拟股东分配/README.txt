1、分配虚拟股东，先根据成交，再根据委托，委托成交都没有的处理到主账户
time=2022-11-30 20:52:42.443, nano=41128317601300, cost=19.663, sn=1130205205000000060, sid=204, sql= UPDATE StkOptionSettlement a SET (custId , acctId , regId , regName,knockTime ,internalOffsetFlag,internalCoveredFlag) =(SELECT r.custId, f.acctId, f.regId, r.regName,f.knockTime,f.internalOffsetFlag, f.internalCoveredFlag from FuturetradingResultBak f, Registration r   WHERE f.exchId IN('X','Y')  AND  f.knockCode = a.knockNum AND f.offerRegId = a.offerRegId AND f.stkId = a.stkId AND f.bsflag = a.bsflag AND  a.exchid=f.exchId AND f.f_offSetFlag = a.offSetFlag AND f.exchId = r.exchId  AND f.regId = r.regId  ) WHERE a.dbfId in ('OP_JSMX','SQ_JSMX') and custId is null  and dbfId ='OP_JSMX' AND EXISTS (SELECT  'x' FROM FuturetradingResultBak f, Registration r   WHERE f.exchId IN('X','Y')  AND  f.knockCode = a.knockNum  AND f.offerRegId = a.offerRegId  AND f.stkId = a.stkId  AND f.bsflag = a.bsflag  AND  a.exchid=f.exchId  AND f.f_offSetFlag = a.offSetFlag  AND f.exchId = r.exchId  AND f.regId = r.regId);

time=2022-11-30 20:52:42.451, nano=41128326990300, cost=9.321, sn=1130205205000000060, sid=204, sql= UPDATE StkOptionSettlement a SET (custId , acctId , regId , regName,knockTime ,internalOffsetFlag,internalCoveredFlag) =(SELECT r.custId, f.acctId, f.regId, r.regName,f.orderTime,f.internalOffsetFlag, f.internalCoveredFlag from FutureopenorderBak  f, Registration r   WHERE f.exchId IN('X','Y')  AND  a.contractNum = CASE WHEN f.appointNo is not null  AND f.appointNo <> f.contractNum THEN f.appointNo ELSE f.contractNum END AND f.offerRegId = a.offerRegId AND f.stkId = a.stkId AND f.bsflag = a.bsflag AND  a.exchid=f.exchId AND f.f_offSetFlag = a.offSetFlag AND f.exchId = r.exchId  AND f.regId = r.regId  )WHERE a.dbfId in ('OP_JSMX','SQ_JSMX') and custId is null  and dbfId ='OP_JSMX' AND EXISTS (SELECT  'x' FROM FutureopenorderBak  f, Registration r   WHERE f.exchId IN('X','Y')  AND  a.contractNum = CASE WHEN f.appointNo is not null  AND f.appointNo <> f.contractNum THEN f.appointNo ELSE f.contractNum END AND f.offerRegId = a.offerRegId  AND f.stkId = a.stkId  AND f.bsflag = a.bsflag  AND  a.exchid=f.exchId  AND f.f_offSetFlag = a.offSetFlag  AND f.exchId = r.exchId  AND f.regId = r.regId);

time=2022-11-30 20:52:42.454, nano=41128329495500, cost=2.446, sn=1130205205000000060, sid=204, sql=UPDATE StkOptionSettlement a SET (custId, acctId, regId, regName)= (SELECT DISTINCT custId, acctId, regId, regName FROM registration WHERE exchId IN('X','Y')  AND exchId = a.exchId AND regId = a.offerRegId) WHERE custId IS NULL AND EXISTS ( SELECT 'X' FROM registration WHERE exchId IN('X','Y')  AND exchId = a.exchId AND regId = a.offerRegId) AND a.dbfId = 'OP_JSMX';

time=2022-11-30 20:52:42.456, nano=41128331606600, cost=2.077, sn=1130205205000000060, sid=204, sql=UPDATE StkOptionSettlement a SET (custId, acctId, regId, regName)= (SELECT DISTINCT custId, acctId, regId, regName FROM registration WHERE exchId = a.exchId AND regId = a.offerRegId) WHERE custId IS NULL AND EXISTS ( SELECT 'X' FROM registration WHERE exchId = a.exchId AND regId = a.offerRegId);

time=2022-11-30 20:52:42.456, nano=41128331806300, cost=0.157, sn=1130205205000000060, sid=204, sql=INSERT INTO OperationLog VALUES(20221130205241,20221130000000,'99990','20500601','个股期权清算转入数据',1,'60189533C3FF|200002','执行结束');

time=2022-11-30 20:52:42.695, nano=41128569699900, cost=15.476, sn=1130205205000000064, sid=305, sql= UPDATE StkOptionSettlement a SET (custId , acctId , regId , regName,knockTime ,internalOffsetFlag,internalCoveredFlag) =(SELECT r.custId, f.acctId, f.regId, r.regName,f.knockTime,f.internalOffsetFlag, f.internalCoveredFlag from FuturetradingResultBak f, Registration r   WHERE f.exchId IN('X','Y')  AND  f.knockCode = a.knockNum AND f.offerRegId = a.offerRegId AND f.stkId = a.stkId AND f.bsflag = a.bsflag AND  a.exchid=f.exchId AND f.f_offSetFlag = a.offSetFlag AND f.exchId = r.exchId  AND f.regId = r.regId  ) WHERE a.dbfId in ('OP_JSMX','SQ_JSMX') and custId is null  and dbfId ='SQ_JSMX' AND EXISTS (SELECT  'x' FROM FuturetradingResultBak f, Registration r   WHERE f.exchId IN('X','Y')  AND  f.knockCode = a.knockNum  AND f.offerRegId = a.offerRegId  AND f.stkId = a.stkId  AND f.bsflag = a.bsflag  AND  a.exchid=f.exchId  AND f.f_offSetFlag = a.offSetFlag  AND f.exchId = r.exchId  AND f.regId = r.regId);

time=2022-11-30 20:52:42.704, nano=41128579406100, cost=9.655, sn=1130205205000000064, sid=305, sql= UPDATE StkOptionSettlement a SET (custId , acctId , regId , regName,knockTime ,internalOffsetFlag,internalCoveredFlag) =(SELECT r.custId, f.acctId, f.regId, r.regName,f.orderTime,f.internalOffsetFlag, f.internalCoveredFlag from FutureopenorderBak  f, Registration r   WHERE f.exchId IN('X','Y')  AND  a.contractNum = CASE WHEN f.appointNo is not null  AND f.appointNo <> f.contractNum THEN f.appointNo ELSE f.contractNum END AND f.offerRegId = a.offerRegId AND f.stkId = a.stkId AND f.bsflag = a.bsflag AND  a.exchid=f.exchId AND f.f_offSetFlag = a.offSetFlag AND f.exchId = r.exchId  AND f.regId = r.regId  )WHERE a.dbfId in ('OP_JSMX','SQ_JSMX') and custId is null  and dbfId ='SQ_JSMX' AND EXISTS (SELECT  'x' FROM FutureopenorderBak  f, Registration r   WHERE f.exchId IN('X','Y')  AND  a.contractNum = CASE WHEN f.appointNo is not null  AND f.appointNo <> f.contractNum THEN f.appointNo ELSE f.contractNum END AND f.offerRegId = a.offerRegId  AND f.stkId = a.stkId  AND f.bsflag = a.bsflag  AND  a.exchid=f.exchId  AND f.f_offSetFlag = a.offSetFlag  AND f.exchId = r.exchId  AND f.regId = r.regId);

time=2022-11-30 20:52:42.708, nano=41128582730400, cost=3.272, sn=1130205205000000064, sid=305, sql=UPDATE StkOptionSettlement a SET (custId, acctId, regId, regName)= (SELECT DISTINCT custId, acctId, regId, regName FROM registration WHERE exchId IN('X','Y')  AND exchId = a.exchId AND regId = a.offerRegId) WHERE custId IS NULL AND EXISTS ( SELECT 'X' FROM registration WHERE exchId IN('X','Y')  AND exchId = a.exchId AND regId = a.offerRegId) AND a.dbfId = 'SQ_JSMX';


初始化清零ydContractAmt 
time=2022-11-30 21:09:21.378, nano=42127252846000, cost=3.424, sid=204, sql=UPDATE FuturePosition SET todayPositionCost = averageOpenPrice, ydContractAmt = 0 WHERE (exchId, stkId) IN  (SELECT exchId, stkId FROM FutureInfo WHERE stkType = '4');
