Socket=192.168.4.1@54579 clientId=560 serialNum=1124125517000001838 state=1 time=2022-11-24 13:52:23.437 cost=61.51 successflag=0 bcnt=2 ecnt=0
head:	type=1050, len=24, MAC="70B5E8707235", srcAddr="192.168.4.1@54579", checkSum="26312", flags=257, serial="795", funcCode="00501520"
request:
	field_0:  recordcnt=2,  apitype="Stock",  apiversion="2.2.7.0",  terminalinfo="PC;IIP=NA;IPORT=NA;LIP=192.168.4.1;MAC=70B5E8707235;HD=417AZRZMS;PCN=JIAOZHENPENG;CPU=BFEBFBFF000A0671;PI=C^NTFS^138.25G;VOL=0005-2FC7",  compressflag=1,  
	field_1:  optmode="A0",  optid="99990",  optpwd="QJXF5/63 ",  exchid="0",  
response:
	field_0:  successflg=0,  recordcnt=0,  guid="",  
--------------------------- 00501520 ：处理开放式基金交易数据 <2022-11-24 13:52:23.376, nano:142493231330200, serialNum:1124125517000001838> begin ---------------------------;

time=2022-11-24 13:52:23.378, nano=142493233361000, cost=1.974, sn=1124125517000001838, sid=392, index=0, sql=SELECT * FROM FundTradeResult WHERE validFlag=-1 AND exchId='0' AND reckoningTime>=20221124000000 AND reckoningTime<=20221124235959;

time=2022-11-24 13:52:23.378, nano=142493234006800, cost=0.615, sn=1124125517000001838, sid=392, sql=UPDATE FundTradeResult SET validFlag=9 WHERE validFlag=-1 AND exchId='0' AND reckoningTime>=20221124000000 AND reckoningTime<=20221124235959;

time=2022-11-24 13:52:23.379, nano=142493234169600, cost=0.134, sn=1124125517000001838, sid=654, sql=UPDATE TransactionStatus SET progress = 20 WHERE computerMac = '70B5E8707235' AND functionId = 'null' AND label = 'null' AND optTime = -1;

time=2022-11-24 13:52:23.380, nano=142493234717000, cost=0.149, sn=1124125517000001838, sid=392, index=1, sql=SELECT regId, optMode, orderTime, operationMAC FROM openOrder2022 WHERE exchId = '0' AND offerRegId = 'A117212000' AND contractNum = '' AND orderTime >= 20221124000000 AND orderTime <= 20221124235959;

time=2022-11-24 13:52:23.380, nano=142493234956100, cost=0.224, sn=1124125517000001838, sid=392, index=1, sql=SELECT a.exchId, a.regId, a.regName, a.offerRegId, a.acctId, a.currencyId, a.custId, a.regStatus, a.regType, a.deskId, a.stkReckChkFlag, a.creditStockFlag, a.stkTradeChkFlag, b.acctName, b.currentAmt, b.usableAmt, b.salesId, b.reckoningCheckFlag, b.acctStatus, b.creditFundFlag, c.custName, c.custType, c.brokerId, c.branchId, c.costCenterId, c.customerFeeId, c.custodyMode, c.costMethod, CASE WHEN c.costCenterId IN ('1','Y','501','S06') THEN 'Y' ELSE 'N' END, a.f_hedgeFlag,b.tusableamt  FROM registration a, account b, customer c WHERE c.custId = b.custId AND b.acctId = a.acctId AND b.currencyId = a.currencyId AND a.exchId = '0' AND a.regId = 'A117212000';

time=2022-11-24 13:52:23.380, nano=142493235014400, cost=0.015, sn=1124125517000001838, sid=392, sqlPrepare=@7b719884, sql= UPDATE StkList SET previousCost = case when abs((previousCost * (currentQty+ unsaleableqty+ agreeRepoQty+ bondPledgeQty+ qBondPledgeQty) + ?)/(currentQty+ unsaleableqty+ agreeRepoQty+ bondPledgeQty+ qBondPledgeQty + ?))-9.999999999E9>=0  then    case when  (previousCost * (currentQty+ unsaleableqty+ agreeRepoQty+ bondPledgeQty+ qBondPledgeQty) + ?)/(currentQty+ unsaleableqty+ agreeRepoQty+ bondPledgeQty+ qBondPledgeQty + ?) > 0       then 9.999999999E9 else -9.999999999E9 end         else (previousCost * (currentQty+ unsaleableqty+ agreeRepoQty+ bondPledgeQty+ qBondPledgeQty) + ?)/(currentQty+ unsaleableqty+ agreeRepoQty+ bondPledgeQty+ qBondPledgeQty + ?) end, currentQty = currentQty + ?, currentQtyF = currentQtyF + ?, usableQty = usableQty + ?, bondPledgeQty = bondPledgeQty + ?, bondPledgeUsableQty = bondPledgeUsableQty + ?, unsaleableqty= unsaleableqty + ?, selllimitqty =selllimitqty + ?, dividendQty=dividendQty+ ?, settlePreviousCost = case when abs((settlePreviousCost * (currentQty+ unsaleableqty+ agreeRepoQty+ bondPledgeQty+ qBondPledgeQty) + ?)/(currentQty+ unsaleableqty+ agreeRepoQty+ bondPledgeQty+ qBondPledgeQty + ?))-9.999999999E9>=0  then     case when  (settlePreviousCost * (currentQty+ unsaleableqty+ agreeRepoQty+ bondPledgeQty+ qBondPledgeQty) + ?)/(currentQty+ unsaleableqty+ agreeRepoQty+ bondPledgeQty+ qBondPledgeQty + ?) > 0       then 9.999999999E9 else -9.999999999E9 end         else (settlePreviousCost * (currentQty+ unsaleableqty+ agreeRepoQty+ bondPledgeQty+ qBondPledgeQty) + ?)/(currentQty+ unsaleableqty+ agreeRepoQty+ bondPledgeQty+ qBondPledgeQty + ?) end  WHERE exchId = ? AND deskId = ? AND regId = ? AND stkId = ? AND currentQty+ unsaleableqty+ agreeRepoQty+ bondPledgeQty+ qBondPledgeQty+ ? <> 0;

time=2022-11-24 13:52:23.382, nano=142493237065000, cost=0.841, sn=1124125517000001838, sid=392, index=1, sql=SELECT * FROM StkList WHERE exchId='0' AND regId='A117212000' AND stkId='501001' AND deskId='00W40';

time=2022-11-24 13:52:23.382, nano=142493237622900, cost=0.475, sn=1124125517000001838, sid=392, sql=UPDATE stkList SET usableQty=usableQty + 6000000,currentQty=currentQty + 6000000 WHERE exchId='0' AND deskId='00W40' AND regId='A117212000' AND stkId='501001';

time=2022-11-24 13:52:23.382, nano=142493237858400, cost=0.139, sn=1124125517000001838, sid=392, index=1, sql=SELECT LPAD(TransactionRef.nextVal, 12, '0') FROM dual;

time=2022-11-24 13:52:23.383, nano=142493238094100, cost=0.194, sn=1124125517000001838, sid=392, index=1, sql=SELECT a.exchId, a.regId, a.regName, a.offerRegId, a.acctId, a.currencyId, a.custId, a.regStatus, a.regType, a.deskId, a.stkReckChkFlag, a.creditStockFlag, a.stkTradeChkFlag, b.acctName, b.currentAmt, b.usableAmt, b.salesId, b.reckoningCheckFlag, b.acctStatus, b.creditFundFlag, c.custName, c.custType, c.brokerId, c.branchId, c.costCenterId, c.customerFeeId, c.custodyMode, c.costMethod, CASE WHEN c.costCenterId IN ('1','Y','501','S06') THEN 'Y' ELSE 'N' END, a.f_hedgeFlag,b.tusableamt  FROM registration a, account b, customer c WHERE c.custId = b.custId AND b.acctId = a.acctId AND b.currencyId = a.currencyId AND a.exchId = '0' AND a.regId = 'A117212000';

time=2022-11-24 13:52:23.383, nano=142493238127700, cost=0.002, sn=1124125517000001838, sid=392, sqlPrepare=@6ffb1cb9, sql=SELECT currentQty FROM stkList WHERE exchId = ? AND deskId = ? AND regId = ? AND stkId = ?;

time=2022-11-24 13:52:23.383, nano=142493238334000, cost=0.019, sn=1124125517000001838, sid=392, sqlPrepare=@39fc9dcc, sql=INSERT INTO TradingLog(serialNum,briefId,currencyId,reckoningTime,occurTime,exchId,contractNum,bankSerialNum,bankId,acctId,acctName,branchId,regId,stkId,stkName,stkType,tradeType,optMode,optId,deskId,orderType,knockQty,knockPrice,knockTime,reckoningAmt,knockAmt,postAmt,postQty,stampTax,standardcommisionFee,commision,tradetransFee,reckoningFee,transRuleFee,perOrderFee,withdrawFee,knockFee,handlingFee,stkMngFee,exchtransFee,ventureFee,optLevel,custType,custId,custName,brokerId,optBranchId,costCenterId,noteNum,depositInterest,depositSum,salesId,undoFlag,checkOrCash,accountingFlag,auditOptId1,auditOptId2,getAccountDate,getAccountNum,memo,accuredInterest,fullKnockAmt,bankAcctId,bankAmt,rightOwnFlag,selfFlag,bankContractNum,offerTime,chargeType,discountAmt,overdueAmt,confirmResult,auditOptid,confirmTime,todayChargeFlag,reckoningCheckFlag,stkReckChkFlag,custodyMode,confirmFee,agencyFee,orderStkId,price1,price2,internalBizMark,creditStockFlag,transactionRef,rmsTradeId,interestMode,settleDate,knockQtyF,custBankID,internalOrderType,custBankAcctId,custBankTransPersion,TACode,settlementMethod,projectId,deliveryType,TAAccountId,creditFundFlag,subClientId,isSolicited,basketId,exteriorAcctId,TDeliverFlag,offSetFlag,exchMarginAmt,custMarginAmt,closePNL,realtimePNL,openDate,openKnockCode,tradeCurrencyId,exchRate,tradeReckoningAmt,settleKnockAmt,settleFullKnockAmt,settleAccuredInterest,settleStampTax,settleCommision,settleTradetransFee,settleReckoningFee,settleTransRuleFee,settleHandlingFee,settleStkMngFee,settleExchtransFee,settleVentureFee,secuAmt,settleSecuAmt,permitPhone,operationMac,shareAttr,settleMode,firstOtherFee,secondOtherFee,listedStatus,adjustedFeeFlag,businessCode,otherFee4) VALUES(?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?);

time=2022-11-24 13:52:23.384, nano=142493239853600, cost=0.391, sn=1124125517000001838, sid=392, sql=UPDATE FundTradeResult SET validFlag=0 WHERE serialNum=30100049 AND reckoningTime=20221124135222;

time=2022-11-24 13:52:23.386, nano=142493241625000, cost=1.365, sn=1124125517000001838, sid=392, index=1, sql=SELECT regId, optMode, orderTime, operationMAC FROM openOrder2022 WHERE exchId = '0' AND offerRegId = 'A117203000' AND contractNum = '' AND orderTime >= 20221124000000 AND orderTime <= 20221124235959;

time=2022-11-24 13:52:23.387, nano=142493242805500, cost=1.161, sn=1124125517000001838, sid=392, index=1, sql=SELECT a.exchId, a.regId, a.regName, a.offerRegId, a.acctId, a.currencyId, a.custId, a.regStatus, a.regType, a.deskId, a.stkReckChkFlag, a.creditStockFlag, a.stkTradeChkFlag, b.acctName, b.currentAmt, b.usableAmt, b.salesId, b.reckoningCheckFlag, b.acctStatus, b.creditFundFlag, c.custName, c.custType, c.brokerId, c.branchId, c.costCenterId, c.customerFeeId, c.custodyMode, c.costMethod, CASE WHEN c.costCenterId IN ('1','Y','501','S06') THEN 'Y' ELSE 'N' END, a.f_hedgeFlag,b.tusableamt  FROM registration a, account b, customer c WHERE c.custId = b.custId AND b.acctId = a.acctId AND b.currencyId = a.currencyId AND a.exchId = '0' AND a.regId = 'A117203000';

time=2022-11-24 13:52:23.388, nano=142493242850700, cost=0.022, sn=1124125517000001838, sid=392, sqlPrepare=@2c167549, sql= UPDATE StkList SET previousCost = case when abs((previousCost * (currentQty+ unsaleableqty+ agreeRepoQty+ bondPledgeQty+ qBondPledgeQty) + ?)/(currentQty+ unsaleableqty+ agreeRepoQty+ bondPledgeQty+ qBondPledgeQty + ?))-9.999999999E9>=0  then    case when  (previousCost * (currentQty+ unsaleableqty+ agreeRepoQty+ bondPledgeQty+ qBondPledgeQty) + ?)/(currentQty+ unsaleableqty+ agreeRepoQty+ bondPledgeQty+ qBondPledgeQty + ?) > 0       then 9.999999999E9 else -9.999999999E9 end         else (previousCost * (currentQty+ unsaleableqty+ agreeRepoQty+ bondPledgeQty+ qBondPledgeQty) + ?)/(currentQty+ unsaleableqty+ agreeRepoQty+ bondPledgeQty+ qBondPledgeQty + ?) end, currentQty = currentQty + ?, currentQtyF = currentQtyF + ?, usableQty = usableQty + ?, bondPledgeQty = bondPledgeQty + ?, bondPledgeUsableQty = bondPledgeUsableQty + ?, unsaleableqty= unsaleableqty + ?, selllimitqty =selllimitqty + ?, dividendQty=dividendQty+ ?, settlePreviousCost = case when abs((settlePreviousCost * (currentQty+ unsaleableqty+ agreeRepoQty+ bondPledgeQty+ qBondPledgeQty) + ?)/(currentQty+ unsaleableqty+ agreeRepoQty+ bondPledgeQty+ qBondPledgeQty + ?))-9.999999999E9>=0  then     case when  (settlePreviousCost * (currentQty+ unsaleableqty+ agreeRepoQty+ bondPledgeQty+ qBondPledgeQty) + ?)/(currentQty+ unsaleableqty+ agreeRepoQty+ bondPledgeQty+ qBondPledgeQty + ?) > 0       then 9.999999999E9 else -9.999999999E9 end         else (settlePreviousCost * (currentQty+ unsaleableqty+ agreeRepoQty+ bondPledgeQty+ qBondPledgeQty) + ?)/(currentQty+ unsaleableqty+ agreeRepoQty+ bondPledgeQty+ qBondPledgeQty + ?) end  WHERE exchId = ? AND deskId = ? AND regId = ? AND stkId = ? AND currentQty+ unsaleableqty+ agreeRepoQty+ bondPledgeQty+ qBondPledgeQty+ ? <> 0;

time=2022-11-24 13:52:23.389, nano=142493243557100, cost=0.483, sn=1124125517000001838, sid=392, sql=UPDATE stkList SET currentQty=currentQty + 2429,currentQtyF=currentQtyF + 2429.0,usableQty=usableQty + 2429,bondPledgeQty=bondPledgeQty + 0,bondPledgeUsableQty=bondPledgeUsableQty + 0 WHERE exchId='0' AND deskId='00W40' AND regId='A117203000' AND stkId='501001';

time=2022-11-24 13:52:23.397, nano=142493251872300, cost=8.168, sn=1124125517000001838, sid=392, sql=INSERT INTO StkList (exchId,acctId,custId,regId,regName,offerRegId,stkId,stkName,exchTrusteeshipQty,previousQty,previousCost,stkValue,previousIncome,usableQty,currentQty,unsaleableQty,sellFrozenQty,buyFrozenQty,ExceptFrozenQty,realtimeCost,realTimeIncome,currencyId,stkType,tradeType,deskId,currentStkValue,newPrice,ETFKnockQty,sellUsedQty,ETFUsedQty,needSettleQty,impawnQty,warrantUsedQty,bondPledgeQty,bondPledgeUsableQty,holdStatus,creditShareUsedQty,currentCreditShareQty,creditShareFrozenQty,guarantyQty,currentQtyF,goingBuyQty,totalSellQty,sellLimitQty,waitSettleQty,exchFrozenQty,dividendAmt,dividendQty,agreeRepoQty,qBondPledgeQty,qBondPledgeUsableQty,exchSellFrozenQty,ETFpurchaseFrozenQty,intsUsableQty,intsBuyFrozenQty,intsSellUsedQty,tdTotalOpenAmt,tdTotalOpenQty,tdTotalCloseAmt,tdTotalCloseQty,tdTotalOpenFee,tdTotalCloseFee,coveredFrozenQty,coveredFrozenUsableQty,coveredFrozenPositionQty,settlePreviousCost,settleStkValue,settlePreviousIncome,exchRate,creditInShareUsedQty,creditInShareQty,creditOutShareUsedQty,creditOutShareQty,noUseInitQty,usedUnfrozenQty,fastUpdateCnt,creditSpareQty,tdTotalNotBuyQty,tdTotalNotSellQty,occurCreditLockShareQty,gapFrozenQty,zrtTransQty,CreditShareGoingqty,CreditUSABLEQTY,Creditbuyfrozenqty) VALUES('0','000011720300','000011720300','A117203000','焦振鹏','A117203000','501001','财通精选',0,0,0.0,0.0,0.0,2429,2429,0,0,0,0,0.0,0.0,'00','C2','A0','00W40',0.0,0.0,0,0,0,0,0,0,0,0,0,0,0,0,0,2429.0,0,0,0,0,0,0.0,0,0,0,0,0,0,0,0,0,0.0,0,0.0,0,0.0,0.0,0,0,0,0.0,0.0,0.0,1.0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);

time=2022-11-24 13:52:23.397, nano=142493252699600, cost=0.804, sn=1124125517000001838, sid=392, index=1, sql=SELECT * FROM StkList WHERE exchId='0' AND regId='A117203000' AND stkId='501001' AND deskId='00W40';

time=2022-11-24 13:52:23.398, nano=142493252935200, cost=0.166, sn=1124125517000001838, sid=392, index=1, sql=SELECT LPAD(TransactionRef.nextVal, 12, '0') FROM dual;

time=2022-11-24 13:52:23.398, nano=142493253200700, cost=0.242, sn=1124125517000001838, sid=392, index=1, sql=SELECT a.exchId, a.regId, a.regName, a.offerRegId, a.acctId, a.currencyId, a.custId, a.regStatus, a.regType, a.deskId, a.stkReckChkFlag, a.creditStockFlag, a.stkTradeChkFlag, b.acctName, b.currentAmt, b.usableAmt, b.salesId, b.reckoningCheckFlag, b.acctStatus, b.creditFundFlag, c.custName, c.custType, c.brokerId, c.branchId, c.costCenterId, c.customerFeeId, c.custodyMode, c.costMethod, CASE WHEN c.costCenterId IN ('1','Y','501','S06') THEN 'Y' ELSE 'N' END, a.f_hedgeFlag,b.tusableamt  FROM registration a, account b, customer c WHERE c.custId = b.custId AND b.acctId = a.acctId AND b.currencyId = a.currencyId AND a.exchId = '0' AND a.regId = 'A117203000';

time=2022-11-24 13:52:23.398, nano=142493253220400, cost=0.003, sn=1124125517000001838, sid=392, sqlPrepare=@5b546df7, sql=SELECT currentQty FROM stkList WHERE exchId = ? AND deskId = ? AND regId = ? AND stkId = ?;

time=2022-11-24 13:52:23.398, nano=142493253446500, cost=0.018, sn=1124125517000001838, sid=392, sqlPrepare=@6c7dacf0, sql=INSERT INTO TradingLog(serialNum,briefId,currencyId,reckoningTime,occurTime,exchId,contractNum,bankSerialNum,bankId,acctId,acctName,branchId,regId,stkId,stkName,stkType,tradeType,optMode,optId,deskId,orderType,knockQty,knockPrice,knockTime,reckoningAmt,knockAmt,postAmt,postQty,stampTax,standardcommisionFee,commision,tradetransFee,reckoningFee,transRuleFee,perOrderFee,withdrawFee,knockFee,handlingFee,stkMngFee,exchtransFee,ventureFee,optLevel,custType,custId,custName,brokerId,optBranchId,costCenterId,noteNum,depositInterest,depositSum,salesId,undoFlag,checkOrCash,accountingFlag,auditOptId1,auditOptId2,getAccountDate,getAccountNum,memo,accuredInterest,fullKnockAmt,bankAcctId,bankAmt,rightOwnFlag,selfFlag,bankContractNum,offerTime,chargeType,discountAmt,overdueAmt,confirmResult,auditOptid,confirmTime,todayChargeFlag,reckoningCheckFlag,stkReckChkFlag,custodyMode,confirmFee,agencyFee,orderStkId,price1,price2,internalBizMark,creditStockFlag,transactionRef,rmsTradeId,interestMode,settleDate,knockQtyF,custBankID,internalOrderType,custBankAcctId,custBankTransPersion,TACode,settlementMethod,projectId,deliveryType,TAAccountId,creditFundFlag,subClientId,isSolicited,basketId,exteriorAcctId,TDeliverFlag,offSetFlag,exchMarginAmt,custMarginAmt,closePNL,realtimePNL,openDate,openKnockCode,tradeCurrencyId,exchRate,tradeReckoningAmt,settleKnockAmt,settleFullKnockAmt,settleAccuredInterest,settleStampTax,settleCommision,settleTradetransFee,settleReckoningFee,settleTransRuleFee,settleHandlingFee,settleStkMngFee,settleExchtransFee,settleVentureFee,secuAmt,settleSecuAmt,permitPhone,operationMac,shareAttr,settleMode,firstOtherFee,secondOtherFee,listedStatus,adjustedFeeFlag,businessCode,otherFee4) VALUES(?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?);

time=2022-11-24 13:52:23.399, nano=142493254223300, cost=0.448, sn=1124125517000001838, sid=392, sql=UPDATE FundTradeResult SET validFlag=0 WHERE serialNum=30100050 AND reckoningTime=20221124135222;

time=2022-11-24 13:52:23.416, nano=142493271984100, cost=17.325, sn=1124125517000001838, sid=392, index=1, sql=SELECT regId, optMode, orderTime, operationMAC FROM openOrder2022 WHERE exchId = '0' AND offerRegId = 'A117213000' AND contractNum = '' AND orderTime >= 20221124000000 AND orderTime <= 20221124235959;

time=2022-11-24 13:52:23.418, nano=142493273330500, cost=1.295, sn=1124125517000001838, sid=392, index=1, sql=SELECT a.exchId, a.regId, a.regName, a.offerRegId, a.acctId, a.currencyId, a.custId, a.regStatus, a.regType, a.deskId, a.stkReckChkFlag, a.creditStockFlag, a.stkTradeChkFlag, b.acctName, b.currentAmt, b.usableAmt, b.salesId, b.reckoningCheckFlag, b.acctStatus, b.creditFundFlag, c.custName, c.custType, c.brokerId, c.branchId, c.costCenterId, c.customerFeeId, c.custodyMode, c.costMethod, CASE WHEN c.costCenterId IN ('1','Y','501','S06') THEN 'Y' ELSE 'N' END, a.f_hedgeFlag,b.tusableamt  FROM registration a, account b, customer c WHERE c.custId = b.custId AND b.acctId = a.acctId AND b.currencyId = a.currencyId AND a.exchId = '0' AND a.regId = 'A117213000';

time=2022-11-24 13:52:23.418, nano=142493273374900, cost=0.017, sn=1124125517000001838, sid=392, sqlPrepare=@31324e4e, sql= UPDATE StkList SET previousCost = case when abs((previousCost * (currentQty+ unsaleableqty+ agreeRepoQty+ bondPledgeQty+ qBondPledgeQty) + ?)/(currentQty+ unsaleableqty+ agreeRepoQty+ bondPledgeQty+ qBondPledgeQty + ?))-9.999999999E9>=0  then    case when  (previousCost * (currentQty+ unsaleableqty+ agreeRepoQty+ bondPledgeQty+ qBondPledgeQty) + ?)/(currentQty+ unsaleableqty+ agreeRepoQty+ bondPledgeQty+ qBondPledgeQty + ?) > 0       then 9.999999999E9 else -9.999999999E9 end         else (previousCost * (currentQty+ unsaleableqty+ agreeRepoQty+ bondPledgeQty+ qBondPledgeQty) + ?)/(currentQty+ unsaleableqty+ agreeRepoQty+ bondPledgeQty+ qBondPledgeQty + ?) end, currentQty = currentQty + ?, currentQtyF = currentQtyF + ?, usableQty = usableQty + ?, bondPledgeQty = bondPledgeQty + ?, bondPledgeUsableQty = bondPledgeUsableQty + ?, unsaleableqty= unsaleableqty + ?, selllimitqty =selllimitqty + ?, dividendQty=dividendQty+ ?, settlePreviousCost = case when abs((settlePreviousCost * (currentQty+ unsaleableqty+ agreeRepoQty+ bondPledgeQty+ qBondPledgeQty) + ?)/(currentQty+ unsaleableqty+ agreeRepoQty+ bondPledgeQty+ qBondPledgeQty + ?))-9.999999999E9>=0  then     case when  (settlePreviousCost * (currentQty+ unsaleableqty+ agreeRepoQty+ bondPledgeQty+ qBondPledgeQty) + ?)/(currentQty+ unsaleableqty+ agreeRepoQty+ bondPledgeQty+ qBondPledgeQty + ?) > 0       then 9.999999999E9 else -9.999999999E9 end         else (settlePreviousCost * (currentQty+ unsaleableqty+ agreeRepoQty+ bondPledgeQty+ qBondPledgeQty) + ?)/(currentQty+ unsaleableqty+ agreeRepoQty+ bondPledgeQty+ qBondPledgeQty + ?) end  WHERE exchId = ? AND deskId = ? AND regId = ? AND stkId = ? AND currentQty+ unsaleableqty+ agreeRepoQty+ bondPledgeQty+ qBondPledgeQty+ ? <> 0;

time=2022-11-24 13:52:23.419, nano=142493274158000, cost=0.52, sn=1124125517000001838, sid=392, sql=UPDATE stkList SET currentQty=currentQty + 11120,currentQtyF=currentQtyF + 11120.0,usableQty=usableQty + 11120,bondPledgeQty=bondPledgeQty + 0,bondPledgeUsableQty=bondPledgeUsableQty + 0 WHERE exchId='0' AND deskId='00W40' AND regId='A117213000' AND stkId='501001';

time=2022-11-24 13:52:23.420, nano=142493274873600, cost=0.671, sn=1124125517000001838, sid=392, sql=INSERT INTO StkList (exchId,acctId,custId,regId,regName,offerRegId,stkId,stkName,exchTrusteeshipQty,previousQty,previousCost,stkValue,previousIncome,usableQty,currentQty,unsaleableQty,sellFrozenQty,buyFrozenQty,ExceptFrozenQty,realtimeCost,realTimeIncome,currencyId,stkType,tradeType,deskId,currentStkValue,newPrice,ETFKnockQty,sellUsedQty,ETFUsedQty,needSettleQty,impawnQty,warrantUsedQty,bondPledgeQty,bondPledgeUsableQty,holdStatus,creditShareUsedQty,currentCreditShareQty,creditShareFrozenQty,guarantyQty,currentQtyF,goingBuyQty,totalSellQty,sellLimitQty,waitSettleQty,exchFrozenQty,dividendAmt,dividendQty,agreeRepoQty,qBondPledgeQty,qBondPledgeUsableQty,exchSellFrozenQty,ETFpurchaseFrozenQty,intsUsableQty,intsBuyFrozenQty,intsSellUsedQty,tdTotalOpenAmt,tdTotalOpenQty,tdTotalCloseAmt,tdTotalCloseQty,tdTotalOpenFee,tdTotalCloseFee,coveredFrozenQty,coveredFrozenUsableQty,coveredFrozenPositionQty,settlePreviousCost,settleStkValue,settlePreviousIncome,exchRate,creditInShareUsedQty,creditInShareQty,creditOutShareUsedQty,creditOutShareQty,noUseInitQty,usedUnfrozenQty,fastUpdateCnt,creditSpareQty,tdTotalNotBuyQty,tdTotalNotSellQty,occurCreditLockShareQty,gapFrozenQty,zrtTransQty,CreditShareGoingqty,CreditUSABLEQTY,Creditbuyfrozenqty) VALUES('0','000011721300','000011721300','A117213000','焦振鹏','A117213000','501001','财通精选',0,0,0.0,0.0,0.0,11120,11120,0,0,0,0,0.0,0.0,'00','C2','A0','00W40',0.0,0.0,0,0,0,0,0,0,0,0,0,0,0,0,0,11120.0,0,0,0,0,0,0.0,0,0,0,0,0,0,0,0,0,0.0,0,0.0,0,0.0,0.0,0,0,0,0.0,0.0,0.0,1.0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);

time=2022-11-24 13:52:23.421, nano=142493275923100, cost=1.031, sn=1124125517000001838, sid=392, index=1, sql=SELECT * FROM StkList WHERE exchId='0' AND regId='A117213000' AND stkId='501001' AND deskId='00W40';

time=2022-11-24 13:52:23.421, nano=142493276186300, cost=0.196, sn=1124125517000001838, sid=392, index=1, sql=SELECT LPAD(TransactionRef.nextVal, 12, '0') FROM dual;

time=2022-11-24 13:52:23.421, nano=142493276455200, cost=0.252, sn=1124125517000001838, sid=392, index=1, sql=SELECT a.exchId, a.regId, a.regName, a.offerRegId, a.acctId, a.currencyId, a.custId, a.regStatus, a.regType, a.deskId, a.stkReckChkFlag, a.creditStockFlag, a.stkTradeChkFlag, b.acctName, b.currentAmt, b.usableAmt, b.salesId, b.reckoningCheckFlag, b.acctStatus, b.creditFundFlag, c.custName, c.custType, c.brokerId, c.branchId, c.costCenterId, c.customerFeeId, c.custodyMode, c.costMethod, CASE WHEN c.costCenterId IN ('1','Y','501','S06') THEN 'Y' ELSE 'N' END, a.f_hedgeFlag,b.tusableamt  FROM registration a, account b, customer c WHERE c.custId = b.custId AND b.acctId = a.acctId AND b.currencyId = a.currencyId AND a.exchId = '0' AND a.regId = 'A117213000';

time=2022-11-24 13:52:23.421, nano=142493276477400, cost=0.003, sn=1124125517000001838, sid=392, sqlPrepare=@2e91c91c, sql=SELECT currentQty FROM stkList WHERE exchId = ? AND deskId = ? AND regId = ? AND stkId = ?;

time=2022-11-24 13:52:23.422, nano=142493276722100, cost=0.022, sn=1124125517000001838, sid=392, sqlPrepare=@565222ec, sql=INSERT INTO TradingLog(serialNum,briefId,currencyId,reckoningTime,occurTime,exchId,contractNum,bankSerialNum,bankId,acctId,acctName,branchId,regId,stkId,stkName,stkType,tradeType,optMode,optId,deskId,orderType,knockQty,knockPrice,knockTime,reckoningAmt,knockAmt,postAmt,postQty,stampTax,standardcommisionFee,commision,tradetransFee,reckoningFee,transRuleFee,perOrderFee,withdrawFee,knockFee,handlingFee,stkMngFee,exchtransFee,ventureFee,optLevel,custType,custId,custName,brokerId,optBranchId,costCenterId,noteNum,depositInterest,depositSum,salesId,undoFlag,checkOrCash,accountingFlag,auditOptId1,auditOptId2,getAccountDate,getAccountNum,memo,accuredInterest,fullKnockAmt,bankAcctId,bankAmt,rightOwnFlag,selfFlag,bankContractNum,offerTime,chargeType,discountAmt,overdueAmt,confirmResult,auditOptid,confirmTime,todayChargeFlag,reckoningCheckFlag,stkReckChkFlag,custodyMode,confirmFee,agencyFee,orderStkId,price1,price2,internalBizMark,creditStockFlag,transactionRef,rmsTradeId,interestMode,settleDate,knockQtyF,custBankID,internalOrderType,custBankAcctId,custBankTransPersion,TACode,settlementMethod,projectId,deliveryType,TAAccountId,creditFundFlag,subClientId,isSolicited,basketId,exteriorAcctId,TDeliverFlag,offSetFlag,exchMarginAmt,custMarginAmt,closePNL,realtimePNL,openDate,openKnockCode,tradeCurrencyId,exchRate,tradeReckoningAmt,settleKnockAmt,settleFullKnockAmt,settleAccuredInterest,settleStampTax,settleCommision,settleTradetransFee,settleReckoningFee,settleTransRuleFee,settleHandlingFee,settleStkMngFee,settleExchtransFee,settleVentureFee,secuAmt,settleSecuAmt,permitPhone,operationMac,shareAttr,settleMode,firstOtherFee,secondOtherFee,listedStatus,adjustedFeeFlag,businessCode,otherFee4) VALUES(?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?);

time=2022-11-24 13:52:23.422, nano=142493277680200, cost=0.517, sn=1124125517000001838, sid=392, sql=UPDATE FundTradeResult SET validFlag=0 WHERE serialNum=30100051 AND reckoningTime=20221124135222;

time=2022-11-24 13:52:23.423, nano=142493278276900, cost=0.177, sn=1124125517000001838, sid=392, index=1, sql=SELECT regId, optMode, orderTime, operationMAC FROM openOrder2022 WHERE exchId = '0' AND offerRegId = 'A117212000' AND contractNum = '' AND orderTime >= 20221124000000 AND orderTime <= 20221124235959;

time=2022-11-24 13:52:23.423, nano=142493278498300, cost=0.206, sn=1124125517000001838, sid=392, index=1, sql=SELECT a.exchId, a.regId, a.regName, a.offerRegId, a.acctId, a.currencyId, a.custId, a.regStatus, a.regType, a.deskId, a.stkReckChkFlag, a.creditStockFlag, a.stkTradeChkFlag, b.acctName, b.currentAmt, b.usableAmt, b.salesId, b.reckoningCheckFlag, b.acctStatus, b.creditFundFlag, c.custName, c.custType, c.brokerId, c.branchId, c.costCenterId, c.customerFeeId, c.custodyMode, c.costMethod, CASE WHEN c.costCenterId IN ('1','Y','501','S06') THEN 'Y' ELSE 'N' END, a.f_hedgeFlag,b.tusableamt  FROM registration a, account b, customer c WHERE c.custId = b.custId AND b.acctId = a.acctId AND b.currencyId = a.currencyId AND a.exchId = '0' AND a.regId = 'A117212000';

time=2022-11-24 13:52:23.423, nano=142493278664800, cost=0.15, sn=1124125517000001838, sid=392, index=1, sql=SELECT LPAD(TransactionRef.nextVal, 12, '0') FROM dual;

time=2022-11-24 13:52:23.423, nano=142493278849200, cost=0.13, sn=1124125517000001838, sid=392, index=1, sql=SELECT LPAD(TransactionRef.nextVal, 12, '0') FROM dual;

time=2022-11-24 13:52:23.424, nano=142493279652200, cost=0.743, sn=1124125517000001838, sid=392, sql=INSERT INTO UnProcessedReckoningResult (acctId,contractNum,exchId,regId,regName,offerregId,stkId,stkName,knockQty,knockPrice,knockAmt,knockTime,knockCode,orderType,tradeType,stkType,deskId,optMode,optId,branchId,stampTax,standardcommisionFee,commision,tradetransFee,reckoningFee,transRuleFee,handlingFee,stkMngFee,ventureFee,reckoningAmt,exchtransFee,fundProcessDays,stkDeliveryDays,unDeliveryFundUseFlag,unDeliverystkUseFlag,currencyId,custId,accuredInterest,briefId,fullKnockAmt,bankId,bankContractNum,usingBankFundFlag,bankAcctId,bankAmt,localUsableAmt,rightOwnFlag,currentFundFlag,offerTime,bankDeliveryDays,confirmResult,auditOptid,confirmTime,chargeType,todayChargeFlag,reckoningCheckFlag,stkReckChkFlag,custodyMode,confirmFee,firstKnockQty,firstReckoningAmt,agencyFee,exchErrorCode,memo,transactionRef,settlementMethod,settleDate,deliveryType,creditFundFlag,marketValueFlag,repurchaseDay,oldKnockTime,exchRate,tradeReckoningAmt,settleKnockAmt,settleFullKnockAmt,settleAccuredInterest,settleStampTax,settleCommision,settleTradetransFee,settleReckoningFee,settleTransRuleFee,settleHandlingFee,settleStkMngFee,settleExchtransFee,settleVentureFee,secuAmt,settleSecuAmt,adjustedFeeFlag,firstCashSettleDate,delayDeliveryFlag) VALUES('000011721200','','0','A117212000','焦振鹏主股东','A117212000','501001','财通精选',91818,0.11359994772266876,10430.52,20221124135223,'','143','A0','C2','00W40','A0','99990','000001',0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,10430.52,0.0,1,0,1,0,'00','000011721200',0.0,'005_005_001',10430.52,'','',0,'',0.0,0.0,0,0,-1,1,-1,'',-1,'0','1','1','1','5',0.0,91818,0.0,0.0,'0000','结算公司发起','000007079957','NONDVP',20221124135223,'U','0',-1,0,-1,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0,0,'0');

time=2022-11-24 13:52:23.425, nano=142493280393300, cost=0.687, sn=1124125517000001838, sid=392, sql=INSERT INTO UnProcessedReckoningResultHis (acctId,contractNum,exchId,regId,regName,offerregId,stkId,stkName,knockQty,knockPrice,knockAmt,knockTime,knockCode,orderType,tradeType,stkType,deskId,optMode,optId,branchId,stampTax,standardcommisionFee,commision,tradetransFee,reckoningFee,transRuleFee,handlingFee,stkMngFee,ventureFee,reckoningAmt,exchtransFee,fundProcessDays,stkDeliveryDays,unDeliveryFundUseFlag,unDeliverystkUseFlag,currencyId,custId,accuredInterest,getAccountNum,getAccountDate,briefId,DeliveryFlag,fullKnockAmt,bankId,bankContractNum,usingBankFundFlag,bankAcctId,bankAmt,localUsableAmt,rightOwnFlag,currentFundFlag,offerTime,bankDeliveryDays,confirmResult,auditOptid,confirmTime,chargeType,todayChargeFlag,reckoningCheckFlag,stkReckChkFlag,custodyMode,confirmFee,firstKnockQty,firstReckoningAmt,agencyFee,transactionRef,settlementMethod,settleDate,deliveryType,creditFundFlag,marketValueFlag,repurchaseDay,oldKnockTime,exchRate,tradeReckoningAmt,settleKnockAmt,settleFullKnockAmt,settleAccuredInterest,settleStampTax,settleCommision,settleTradetransFee,settleReckoningFee,settleTransRuleFee,settleHandlingFee,settleStkMngFee,settleExchtransFee,settleVentureFee,secuAmt,settleSecuAmt,adjustedFeeFlag,firstCashSettleDate,delayDeliveryFlag) VALUES('000011721200','','0','A117212000','焦振鹏主股东','A117212000','501001','财通精选',91818,0.11359994772266876,10430.52,20221124135223,'','143','A0','C2','00W40','A0','99990','000001',0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,10430.52,0.0,1,0,1,0,'00','000011721200',0.0,0,0,'005_005_001',0,10430.52,'','',0,'',0.0,0.0,0,0,-1,1,-1,'',-1,'0','1','1','1','5',0.0,0,0.0,0.0,'000007079957','NONDVP',20221124135223,'S','0',-1,0,-1,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0,0,'0');

time=2022-11-24 13:52:23.425, nano=142493280580200, cost=0.151, sn=1124125517000001838, sid=392, sql=UPDATE account SET usableAmt=usableAmt + 10430.52 WHERE acctId='000011721200' AND currencyId='00';

time=2022-11-24 13:52:23.426, nano=142493281064000, cost=0.463, sn=1124125517000001838, sid=392, sql=UPDATE FundTradeResult SET validFlag=0 WHERE serialNum=30100052 AND reckoningTime=20221124135223;

time=2022-11-24 13:52:23.426, nano=142493281620500, cost=0.145, sn=1124125517000001838, sid=392, index=1, sql=SELECT regId, optMode, orderTime, operationMAC FROM openOrder2022 WHERE exchId = '0' AND offerRegId = 'A117212000' AND contractNum = '' AND orderTime >= 20221124000000 AND orderTime <= 20221124235959;

time=2022-11-24 13:52:23.426, nano=142493281834200, cost=0.199, sn=1124125517000001838, sid=392, index=1, sql=SELECT a.exchId, a.regId, a.regName, a.offerRegId, a.acctId, a.currencyId, a.custId, a.regStatus, a.regType, a.deskId, a.stkReckChkFlag, a.creditStockFlag, a.stkTradeChkFlag, b.acctName, b.currentAmt, b.usableAmt, b.salesId, b.reckoningCheckFlag, b.acctStatus, b.creditFundFlag, c.custName, c.custType, c.brokerId, c.branchId, c.costCenterId, c.customerFeeId, c.custodyMode, c.costMethod, CASE WHEN c.costCenterId IN ('1','Y','501','S06') THEN 'Y' ELSE 'N' END, a.f_hedgeFlag,b.tusableamt  FROM registration a, account b, customer c WHERE c.custId = b.custId AND b.acctId = a.acctId AND b.currencyId = a.currencyId AND a.exchId = '0' AND a.regId = 'A117212000';

time=2022-11-24 13:52:23.427, nano=142493282006900, cost=0.155, sn=1124125517000001838, sid=392, index=1, sql=SELECT LPAD(TransactionRef.nextVal, 12, '0') FROM dual;

time=2022-11-24 13:52:23.427, nano=142493282129000, cost=0.089, sn=1124125517000001838, sid=392, index=1, sql=SELECT LPAD(TransactionRef.nextVal, 12, '0') FROM dual;

time=2022-11-24 13:52:23.427, nano=142493282770800, cost=0.602, sn=1124125517000001838, sid=392, sql=INSERT INTO UnProcessedReckoningResult (acctId,contractNum,exchId,regId,regName,offerregId,stkId,stkName,knockQty,knockPrice,knockAmt,knockTime,knockCode,orderType,tradeType,stkType,deskId,optMode,optId,branchId,stampTax,standardcommisionFee,commision,tradetransFee,reckoningFee,transRuleFee,handlingFee,stkMngFee,ventureFee,reckoningAmt,exchtransFee,fundProcessDays,stkDeliveryDays,unDeliveryFundUseFlag,unDeliverystkUseFlag,currencyId,custId,accuredInterest,briefId,fullKnockAmt,bankId,bankContractNum,usingBankFundFlag,bankAcctId,bankAmt,localUsableAmt,rightOwnFlag,currentFundFlag,offerTime,bankDeliveryDays,confirmResult,auditOptid,confirmTime,chargeType,todayChargeFlag,reckoningCheckFlag,stkReckChkFlag,custodyMode,confirmFee,firstKnockQty,firstReckoningAmt,agencyFee,exchErrorCode,memo,transactionRef,settlementMethod,settleDate,deliveryType,creditFundFlag,marketValueFlag,repurchaseDay,oldKnockTime,exchRate,tradeReckoningAmt,settleKnockAmt,settleFullKnockAmt,settleAccuredInterest,settleStampTax,settleCommision,settleTradetransFee,settleReckoningFee,settleTransRuleFee,settleHandlingFee,settleStkMngFee,settleExchtransFee,settleVentureFee,secuAmt,settleSecuAmt,adjustedFeeFlag,firstCashSettleDate,delayDeliveryFlag) VALUES('000011721200','','0','A117212000','焦振鹏主股东','A117212000','501002','平安LOF',91818,0.11359994772266876,10430.52,20221124135223,'','143','A0','C2','00W40','A0','99990','000001',0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,10430.52,0.0,1,0,1,0,'00','000011721200',0.0,'005_005_001',10430.52,'','',0,'',0.0,0.0,0,0,-1,1,-1,'',-1,'0','1','1','1','5',0.0,91818,0.0,0.0,'0000','结算公司发起','000007079959','NONDVP',20221124135223,'U','0',-1,0,-1,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0,0,'0');

time=2022-11-24 13:52:23.428, nano=142493283405700, cost=0.594, sn=1124125517000001838, sid=392, sql=INSERT INTO UnProcessedReckoningResultHis (acctId,contractNum,exchId,regId,regName,offerregId,stkId,stkName,knockQty,knockPrice,knockAmt,knockTime,knockCode,orderType,tradeType,stkType,deskId,optMode,optId,branchId,stampTax,standardcommisionFee,commision,tradetransFee,reckoningFee,transRuleFee,handlingFee,stkMngFee,ventureFee,reckoningAmt,exchtransFee,fundProcessDays,stkDeliveryDays,unDeliveryFundUseFlag,unDeliverystkUseFlag,currencyId,custId,accuredInterest,getAccountNum,getAccountDate,briefId,DeliveryFlag,fullKnockAmt,bankId,bankContractNum,usingBankFundFlag,bankAcctId,bankAmt,localUsableAmt,rightOwnFlag,currentFundFlag,offerTime,bankDeliveryDays,confirmResult,auditOptid,confirmTime,chargeType,todayChargeFlag,reckoningCheckFlag,stkReckChkFlag,custodyMode,confirmFee,firstKnockQty,firstReckoningAmt,agencyFee,transactionRef,settlementMethod,settleDate,deliveryType,creditFundFlag,marketValueFlag,repurchaseDay,oldKnockTime,exchRate,tradeReckoningAmt,settleKnockAmt,settleFullKnockAmt,settleAccuredInterest,settleStampTax,settleCommision,settleTradetransFee,settleReckoningFee,settleTransRuleFee,settleHandlingFee,settleStkMngFee,settleExchtransFee,settleVentureFee,secuAmt,settleSecuAmt,adjustedFeeFlag,firstCashSettleDate,delayDeliveryFlag) VALUES('000011721200','','0','A117212000','焦振鹏主股东','A117212000','501002','平安LOF',91818,0.11359994772266876,10430.52,20221124135223,'','143','A0','C2','00W40','A0','99990','000001',0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,10430.52,0.0,1,0,1,0,'00','000011721200',0.0,0,0,'005_005_001',0,10430.52,'','',0,'',0.0,0.0,0,0,-1,1,-1,'',-1,'0','1','1','1','5',0.0,0,0.0,0.0,'000007079959','NONDVP',20221124135223,'S','0',-1,0,-1,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0,0,'0');

time=2022-11-24 13:52:23.428, nano=142493283521800, cost=0.094, sn=1124125517000001838, sid=392, sql=UPDATE account SET usableAmt=usableAmt + 10430.52 WHERE acctId='000011721200' AND currencyId='00';

time=2022-11-24 13:52:23.428, nano=142493283885800, cost=0.351, sn=1124125517000001838, sid=392, sql=UPDATE FundTradeResult SET validFlag=0 WHERE serialNum=30100053 AND reckoningTime=20221124135223;

time=2022-11-24 13:52:23.429, nano=142493284275000, cost=0.116, sn=1124125517000001838, sid=654, sql=UPDATE TransactionStatus SET progress = 70 WHERE computerMac = '70B5E8707235' AND functionId = 'null' AND label = 'null' AND optTime = -1;

time=2022-11-24 13:52:23.429, nano=142493284694400, cost=0.3, sn=1124125517000001838, sid=392, sql=UPDATE Tradinglog a SET bankId=(SELECT DISTINCT b.bankId FROM (SELECT acctId, currencyId, DECODE(count(*), 1, MAX(bankId), MAX(DECODE(accountStatus, '1', '', bankId))) AS bankId FROM acctbankreaction GROUP BY acctId, currencyId ) b ,BankPara c, account d WHERE b.currencyId=c.currencyId AND b.bankId=c.bankId AND a.currencyId=d.currencyId AND a.acctId=d.acctId AND d.mainAcctId=b.acctId AND d.currencyId=b.currencyId AND c.transMode<>2) WHERE  a.custodyMode='5'  AND currencyId IN('00')  AND bankId is NULL ;

time=2022-11-24 13:52:23.429, nano=142493284899300, cost=0.196, sn=1124125517000001838, sid=392, sql=UPDATE UnprocessedReckoningResult a SET bankId=(SELECT DISTINCT b.bankId FROM (SELECT acctId, currencyId, DECODE(count(*), 1, MAX(bankId), MAX(DECODE(accountStatus, '1', '', bankId))) AS bankId FROM acctbankreaction GROUP BY acctId, currencyId ) b ,BankPara c, account d WHERE b.currencyId=c.currencyId AND b.bankId=c.bankId AND a.currencyId=d.currencyId AND a.acctId=d.acctId AND d.mainAcctId=b.acctId AND d.currencyId=b.currencyId AND c.transMode<>2) WHERE  a.custodyMode='5'  AND currencyId IN('00') ;

time=2022-11-24 13:52:23.429, nano=142493284974900, cost=0.066, sn=1124125517000001838, sid=392, sql=UPDATE Tradinglog a SET settlementMethod = 'DVP' WHERE orderType like '%S' AND optMode = 'AQ'  AND bankId IN ('1260', '0001', '0086', '6001');

time=2022-11-24 13:52:23.430, nano=142493285106700, cost=0.115, sn=1124125517000001838, sid=392, sql=UPDATE TradingLog a SET creditFundFlag =(SELECT creditFundFlag FROM Account b WHERE a.acctId = b.acctId AND a.currencyId = b.currencyId AND b.creditFundFlag <> '0') WHERE EXISTS (SELECT acctId FROM Account b WHERE a.acctId = b.acctId AND a.currencyId = b.currencyId AND b.creditFundFlag <> '0');

time=2022-11-24 13:52:23.430, nano=142493285191800, cost=0.08, sn=1124125517000001838, sid=392, sql=UPDATE UnProcessedReckoningresult  a SET creditFundFlag =(SELECT creditFundFlag FROM Account b WHERE a.acctId = b.acctId AND a.currencyId = b.currencyId AND b.creditFundFlag <> '0') WHERE EXISTS (SELECT acctId FROM Account b WHERE a.acctId = b.acctId AND a.currencyId = b.currencyId AND b.creditFundFlag <> '0');

time=2022-11-24 13:52:23.430, nano=142493285270000, cost=0.074, sn=1124125517000001838, sid=392, sql=UPDATE UnProcessedReckoningresultHis  a SET creditFundFlag =(SELECT creditFundFlag FROM Account b WHERE a.acctId = b.acctId AND a.currencyId = b.currencyId AND b.creditFundFlag <> '0') WHERE EXISTS (SELECT acctId FROM Account b WHERE a.acctId = b.acctId AND a.currencyId = b.currencyId AND b.creditFundFlag <> '0') AND knockTime>=20221104000000;

time=2022-11-24 13:52:23.430, nano=142493285332300, cost=0.059, sn=1124125517000001838, sid=392, sql=UPDATE UnduerepurchaseBonds  a SET creditFundFlag =(SELECT creditFundFlag FROM Account b ,Exchange c  WHERE a.acctId = b.acctId  AND a.exchId =c.exchId  AND b.currencyId = c.currencyId AND b.creditFundFlag <> '0') WHERE EXISTS (SELECT acctId FROM Account b ,Exchange c  WHERE a.acctId = b.acctId  AND a.exchId =c.exchId  AND b.currencyId = c.currencyId AND b.creditFundFlag <> '0');

time=2022-11-24 13:52:23.430, nano=142493285393200, cost=0.057, sn=1124125517000001838, sid=392, sql=UPDATE UnduerepurchaseBondsHis  a SET creditFundFlag =(SELECT creditFundFlag FROM Account b ,Exchange c  WHERE a.acctId = b.acctId  AND a.exchId =c.exchId  AND b.currencyId = c.currencyId AND b.creditFundFlag <> '0') WHERE EXISTS (SELECT acctId FROM Account b ,Exchange c  WHERE a.acctId = b.acctId  AND a.exchId =c.exchId  AND b.currencyId = c.currencyId AND b.creditFundFlag <> '0') AND orderTime >= 20221104000000;

time=2022-11-24 13:52:23.430, nano=142493285837100, cost=0.416, sn=1124125517000001838, sid=392, sql=UPDATE ReckoningOptLog SET optId='99990',optNum=optNum + 1,optStatus=1,optTime=20221124135223 WHERE optItem IN ('TransRightsData') AND exchId='0' AND occurTime=20221124000000;

time=2022-11-24 13:52:23.431, nano=142493286135300, cost=0.269, sn=1124125517000001838, sid=392, sql=INSERT INTO Syslog (occurTime,serialNum,optId,briefId,sysSetType,operationMAC,optLevel,optBranchId,memo) VALUES(20221124135223,30100057,'99990','001_004_002',0,'70B5E8707235|30000001','A9','000001','处理开放式基金数据');

time=2022-11-24 13:52:23.431, nano=142493286733000, cost=0.577, sn=1124125517000001838, sid=392, sql=UPDATE account SET usableAmt = currentAmt - ExceptFrozenAmt + overdraftLimit WHERE usableAmt <> currentAmt - ExceptFrozenAmt + overdraftLimit AND creditFundFlag <> '9';

time=2022-11-24 13:52:23.432, nano=142493287302400, cost=0.555, sn=1124125517000001838, sid=392, sql=UPDATE account SET tUsableAmt = currentAmt - ExceptFrozenAmt + overdraftLimit WHERE tUsableAmt <> currentAmt - ExceptFrozenAmt + overdraftLimit AND creditFundFlag <> '9';

time=2022-11-24 13:52:23.432, nano=142493287670500, cost=0.324, sn=1124125517000001838, sid=392, sql= Update account a set  a.Usableamt = a.Usableamt+(select c.amt + (case  when amt10>0 then  (case when amt20>0 then least(amt10+amt20+amt3,0)  when amt2<=0 then (case when amt10+amt2>0 then least(amt10+amt2+amt3,0)  else least(amt10+amt2,0)+amt3 end) end)  when amt1<=0 then  (case when amt20>0 then  amt1+least(amt20+amt3,0)  when amt2<=0 then amt1+amt2+amt3 end ) end)  from  (select b.acctId,b.currencyId,  sum(case when (b.exchId<>'5' and b.exchId<>'4') then b.reckoningAmt else 0 end) amt,  least(sum(case when b.fundprocessdays=1  and b.exchId in('4','5')  then b.reckoningAmt else 0 end)) amt1,  greatest (sum(case when  b.fundprocessdays=1 and b.exchId in('4','5')  then b.reckoningAmt  else 0 end ),0)  amt10,  least (sum(case when  b.fundprocessdays=2 and b.exchId in('4','5')  then b.reckoningAmt  else 0 end ),0)  amt2,  greatest (sum(case when  b.fundprocessdays=2 and b.exchId in('4','5')  then b.reckoningAmt  else 0 end ),0)  amt20,  least (sum(case when  b.fundprocessdays>=3 and b.exchId in('4','5')  then b.reckoningAmt  else 0 end ),0)  amt3  from unprocessedreckoningresult b  where (b.fundprocessdays>0 or b.stkType='C1') and b.undeliveryfunduseflag=1  Group by b.acctId,b.currencyId  )c  where a.acctId =c.acctId and a.currencyId=c.currencyId),  a.T1ShareUsableAmt = (select (case  when amt20<0 then  (case when  amt1+amt20>0 and  amt30<0  then  greatest(amt1+amt20+amt30) when amt1+amt20>0  and amt3>=0  then  greatest(amt1+amt20,0)+amt3 when  amt1+amt20<=0 then amt3 end)  when amt2>=0 then  (case when  amt30<0 then greatest(amt1+amt2+amt30,0) else  amt1+amt2+amt3 end) end)  from  (select b.acctId,b.currencyId,  greatest (sum(case when  b.fundprocessdays=1 and  b.exchId in('4','5') then b.reckoningAmt  else 0 end ),0)  amt1,  least (sum(case when  b.fundprocessdays=2 and b.exchId in('4','5')  then b.reckoningAmt  else 0 end ),0)  amt20,  greatest (sum(case when  b.fundprocessdays=2 and b.exchId in('4','5')  then b.reckoningAmt  else 0 end ),0)  amt2,  least (sum(case when  b.fundprocessdays>=3 and b.exchId in('4','5')  then b.reckoningAmt  else 0 end ),0)  amt30,  greatest (sum(case when  b.fundprocessdays>=3 and b.exchId in('4','5')  then b.reckoningAmt  else 0 end ),0)  amt3  from unprocessedreckoningresult b  where ( b.fundprocessdays>0 or b.stkType='C1') and b.undeliveryfunduseflag=1  Group by b.acctId,b.currencyId) c  where a.acctId =c.acctId and a.currencyId=c.currencyId),  a.tradeFrozenAmt= tradeFrozenAmt-(select c. amt  from  (select b.acctId,b.currencyId ,sum(case when b.tradetype in ('C6','C7')  AND briefId in('005_001_031','005_001_032')then b.reckoningAmt else 0 end ) amt  from unprocessedreckoningresult b  where (b.fundprocessdays>0 or b.stkType='C1') and b.undeliveryfunduseflag=1  Group by b.acctId,b.currencyId )c  where a.acctId =c.acctId and a.currencyId=c.currencyId),  a.initChgUsableAmt = (select (case  when amt10>0 then  (case when amt20>0 then least(amt10+amt20+amt3,0) when  amt2<=0 then (case when  amt10+amt2>0 then least(amt10+amt2+amt3,0)  else least(amt10+amt2,0)+amt3 end ) end)  when amt1<=0 then  (case when amt20>0 then  amt1+least(amt20+amt3,0) when  amt2<=0 then amt1+amt2+amt3 end) end)  from  (select b.acctId,b.currencyId, least(sum(case when b.fundprocessdays=1  and b.exchId in('4','5')  then b.reckoningAmt else 0 end)) amt1,  greatest (sum(case when  b.fundprocessdays=1 and b.exchId in('4','5')  then b.reckoningAmt  else 0 end ),0)  amt10,  least (sum(case when  b.fundprocessdays=2 and b.exchId in('4','5')  then b.reckoningAmt  else 0 end ),0)  amt2,  greatest (sum(case when  b.fundprocessdays=2 and b.exchId in('4','5')  then b.reckoningAmt  else 0 end ),0)  amt20,  least (sum(case when  b.fundprocessdays>=3 and b.exchId in('4','5')  then b.reckoningAmt  else 0 end ),0)  amt3  from unprocessedreckoningresult b  where  (b.fundprocessdays>0 or b.stkType='C1') and b.undeliveryfunduseflag=1  Group by b.acctId,b.currencyId )c  where a.acctId =c.acctId and a.currencyId=c.currencyId),  initChgT2Amt =(select (case  when amt20<0 then  (case when  amt1+amt20>0 and amt30<0  then  greatest(amt1+amt20+amt30) when  amt1+amt20>0 and  amt3>=0  then  greatest(amt1+amt20,0)+amt3 when  amt1+amt20<=0 then amt3 end )  when amt2>=0 then  (case when  amt30<0 then greatest(amt1+amt2+amt30,0)  else amt1+amt2+amt3 end) end)  from  (select b.acctId,b.currencyId,  greatest (sum(case when  b.fundprocessdays=1 and b.exchId in('4','5')  then b.reckoningAmt  else 0 end ),0)  amt1,  least (sum(case when  b.fundprocessdays=2 and b.exchId in('4','5')  then b.reckoningAmt  else 0 end ),0)  amt20,  greatest (sum(case when  b.fundprocessdays=2 and b.exchId in('4','5')  then b.reckoningAmt  else 0 end ),0)  amt2,  least (sum(case when  b.fundprocessdays>=3 and b.exchId in('4','5')  then b.reckoningAmt  else 0 end ),0)  amt30,  greatest (sum(case when  b.fundprocessdays>=3 and b.exchId in('4','5')  then b.reckoningAmt  else 0 end ),0)  amt3  from unprocessedreckoningresult b  where  (b.fundprocessdays>0 or b.stkType='C1') and b.undeliveryfunduseflag=1  Group by b.acctId,b.currencyId )c  where a.acctId =c.acctId and a.currencyId=c.currencyId)  Where exists (select 'x'  from unprocessedreckoningresult c  where a.acctId =c.acctId and a.currencyId=c.currencyId  And (c.fundprocessdays>0 or c.stkType='C1') and c.undeliveryfunduseflag=1 ) ;

time=2022-11-24 13:52:23.432, nano=142493287770200, cost=0.086, sn=1124125517000001838, sid=392, sql= UPDATE account a  SET a.tradefrozenamt = a.tradefrozenamt +  (SELECT c.amt  FROM (SELECT b.acctId,  b.currencyId,  SUM(b.reckoningAmt) amt  FROM unprocessedreckoningresult b  WHERE b.fundprocessdays > 0  AND b.undeliveryfunduseflag = 0  AND b.marketvalueflag = 2  AND b.exchid IN ('1', '3')  AND b.deliveryType <>'S'  GROUP BY b.acctId, b.currencyId) c  WHERE a.acctId = c.acctId  AND a.currencyId = c.currencyId)  WHERE EXISTS (SELECT 'x'  FROM unprocessedreckoningresult c  WHERE a.acctId = c.acctId  AND a.currencyId = c.currencyId  AND c.fundprocessdays > 0  AND c.undeliveryfunduseflag = 0  AND c.marketvalueflag = 2  AND c.exchid IN ('1', '3')  AND c.deliveryType <>'S' );

time=2022-11-24 13:52:23.432, nano=142493287862100, cost=0.086, sn=1124125517000001838, sid=392, sql=UPDATE account a SET a.usableAmt =  (SELECT a.usableAmt + SUM(b.reckoningAmt) FROM undueRepurchaseBonds b, exchange c WHERE b.acctId = a.acctId AND c.currencyId = a.currencyId AND b.exchId = c.exchId AND b.stkType IN ('A4', 'C3') AND b.deliveryflag = 0 GROUP BY a.acctId, a.currencyId) WHERE (a.acctId, a.currencyId) IN (SELECT UNIQUE b.acctId, c.currencyId FROM undueRepurchaseBonds b, exchange c WHERE b.exchId = c.exchId AND b.stkType IN ('A4', 'C3') AND b.deliveryflag = 0);

time=2022-11-24 13:52:23.435, nano=142493290324000, cost=2.455, sn=1124125517000001838, sid=392, sql=UPDATE account SET tUsableAmt = usableAmt WHERE creditFundFlag <> '9';

time=2022-11-24 13:52:23.435, nano=142493290481100, cost=0.141, sn=1124125517000001838, sid=392, sql=UPDATE stkList SET usableQty = currentQty - ExceptFrozenQty - impawnQty WHERE usableQty <> currentQty - ExceptFrozenQty - impawnQty;

time=2022-11-24 13:52:23.435, nano=142493290575100, cost=0.089, sn=1124125517000001838, sid=392, sql=UPDATE stkList SET bondPledgeUsableQty = bondPledgeQty WHERE bondPledgeUsableQty <> bondPledgeQty;

time=2022-11-24 13:52:23.435, nano=142493290665700, cost=0.086, sn=1124125517000001838, sid=392, sql=UPDATE stkList SET qBondPledgeUsableQty = qBondPledgeQty WHERE qBondPledgeUsableQty <> qBondPledgeQty;

time=2022-11-24 13:52:23.435, nano=142493290731800, cost=0.061, sn=1124125517000001838, sid=392, sql=UPDATE  stklistExtend  SET usableQty = currentQty- frozenQty ,sellFrozenQty = 0 WHERE  (usableQty<> currentQty - frozenQty OR sellFrozenQty<>0) AND shareAttr != 'GG';

time=2022-11-24 13:52:23.435, nano=142493290927700, cost=0.181, sn=1124125517000001838, sid=392, index=0, sql=SELECT * FROM UnProcessedReckoningResult WHERE (stkDeliveryDays>=1 OR stkType='C1' OR briefId='005_003_020' OR briefId='005_004_020') AND unDeliverystkUseFlag=1 AND rightOwnFlag=0 AND stkReckChkFlag=1 AND ((exchId = '0' AND tradeType <> 'B7') OR exchId <> '0') AND regId is NOT NULL AND stkId is NOT NULL AND deskId is NOT NULL;

time=2022-11-24 13:52:23.436, nano=142493291108900, cost=0.169, sn=1124125517000001838, sid=392, index=0, sql=SELECT * FROM UnProcessedReckoningResult WHERE unDeliverystkUseFlag=0 AND marketvalueflag=1 AND exchId IN ('1','3') AND deliveryType<>'S';

time=2022-11-24 13:52:23.436, nano=142493291242100, cost=0.119, sn=1124125517000001838, sid=392, index=0, sql=SELECT r.regId, u.stkId, u.exchId, u.deskId, SUM(u.knockQty), MAX(r.acctId), MAX(r.custId), MAX(r.offerRegId), MAX(r.regName), MAX(r.currencyId) FROM Registration r, UnprocessedReckoningResult u WHERE r.exchId = u.exchId AND r.creditStockFlag = '1' AND u.briefId = '005_004_035' GROUP BY r.regId, u.stkId, u.exchId, u.deskId;

time=2022-11-24 13:52:23.436, nano=142493291378700, cost=0.114, sn=1124125517000001838, sid=654, sql=UPDATE TransactionStatus SET progress = 100 WHERE computerMac = '70B5E8707235' AND functionId = 'null' AND label = 'null' AND optTime = -1;

--------------------------- 00501520 ：处理开放式基金交易数据 <2022-11-24 13:52:23.437, nano:142493292166600, serialNum:1124125517000001838> end ---------------------------;
